<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://yoursite.com">
  <title>Ktig`s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="知识总结 点滴积累">
<meta property="og:type" content="website">
<meta property="og:title" content="Ktig`s blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Ktig`s blog">
<meta property="og:description" content="知识总结 点滴积累">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ktig`s blog">
<meta name="twitter:description" content="知识总结 点滴积累">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/main.css">
  

</head>

<body>
  <div id="container">
    <div class="left-col">
      <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="https://avatars2.githubusercontent.com/u/22739126?v=3&amp;s=466" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Ktig</a></h1>
		</hgroup>

		
		<p class="header-subtitle">心之所指</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/">随笔</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a class="js-smart-menu" data-idx="0" href="javascript:void(0)">所有文章</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="1" href="javascript:void(0)">标签</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="2" href="javascript:void(0)">友链</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="3" href="javascript:void(0)">关于我</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/Ktig" title="github">github</a>
		        
					<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
		        
					<a class="google" target="_blank" href="#" title="google">google</a>
		        
					<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/han-guang-30-89" title="zhihu">zhihu</a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-list"></i></div>
  		<h1 class="header-author js-mobile-header hide">Ktig</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="https://avatars2.githubusercontent.com/u/22739126?v=3&amp;s=466" class="js-avatar">
				
			</div>
			<hgroup>
			  <h1 class="header-author">Ktig</h1>
			</hgroup>
			
			<p class="header-subtitle">心之所指</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/">随笔</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/Ktig" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
			        
						<a class="google" target="_blank" href="#" title="google">google</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/han-guang-30-89" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
        
  
    <article id="post-sass and less" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/12/sass and less/">sass与less的区别</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="安装sass与less"><a href="#安装sass与less" class="headerlink" title="安装sass与less"></a>安装sass与less</h2><p>sass基于Ruby语言开发而成，因此安装sass前需要安装Ruby。（注:mac下自带Ruby无需在安装Ruby!）；方法如下gem install sass、 gem install compass</p>
<p>less 在服务器端最容易的安装方式就是通过 npm （node.js 的包管理器），方法如下：$ npm install -g less</p>
<p>less 在客户端使用“.less”（LESS源文件），只需要在官网载一个javascript脚本文件主“less.js”，然后在我们需要引入LESS源文件的html的<head>中加入如下代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;link rel=&quot;stylesheet/less&quot; type=&quot;text/css&quot; href=&quot;文件路径/styles.less&quot;&gt;</div><div class="line">&lt;script src=&quot;文件路径/less.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</div></pre></td></tr></table></figure></head></p>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>sass 是以$开头定义的变量，如：$mainColor: #963;</p>
<p>less 是以@开头定义的变量，如  @mainColor: #963;</p>
<h2 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h2><p>sass 没有全局变量，满足就近原则，但是实际中可以将需要定义的全局属性放在base.scss 文件中。注意变量名重复；</p>
<p>less 中的作用域和其他程序语言中的作用域非常的相同，他首先会查找局部定义的变量，如果没有找到，会像冒泡一样，一级一级往下查找，直到根为止，同样上面的例子，我们来看看他在LESS下所起的变化。</p>
<h2 id="混合"><a href="#混合" class="headerlink" title="混合"></a>混合</h2><h4 id="Sass的混合"><a href="#Sass的混合" class="headerlink" title="Sass的混合"></a>Sass的混合</h4><p>sass样式中声明Mixins时需要使用“@mixin”，然后后面紧跟Mixins的名，他也可以定义参数，同时可以给这个参数设置一个默认值，但参数名是使用“$”符号开始，而且和参数值之间需要使用冒号（：）分开。</p>
<p>在选择器调用定义好的Mixins需要使用“@include”，然后在其后紧跟你要调用的Mixins名。不过在Sass中还支持老的调用方法，就是使用加号“+”调用Mixins，在“+”后紧跟Mixins名。</p>
<p>举个简单的例子，比如说在你的Sass样式中定义了一个名叫“error”的Mixin，这个“error”设置了一个参数“$borderWidth”，在没特别定义外，这个参数的默认值设置为“2px”：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">/*声明一个Mixin叫作“error”*/</div><div class="line">@mixin error($borderWidth:2px)&#123;</div><div class="line">  border:$borderWidth solid #f00;</div><div class="line">  color: #f00;</div><div class="line">&#125;</div><div class="line">/*调用error Mixins*/</div><div class="line">.generic-error &#123;</div><div class="line">  @include error();/*直接调用error mixins*/</div><div class="line">&#125;</div><div class="line">.login-error &#123;</div><div class="line">  @include error(5px);/*调用error mixins，并将参数$borderWidth的值重定义为5px*/</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="less的混合"><a href="#less的混合" class="headerlink" title="less的混合"></a>less的混合</h2><p>在LESS中，混合是指将定义好的“ClassA”中引入另一个已经定义的“Class”，就像在当前的“Class”中增加一个属性一样。</p>
<p>不过LESS样式中声明Mixins和Sass声明方法不一样，他更像CSS定义样式，在LESS可以将Mixins看成是一个类选择器，当然 Mixins也可以设置参数，并给参数设置默认值。不过设置参数的变量名是使用“@”开头，同样参数和默认参数值之间需要使用冒号（：）分隔开。</p>
<p>正如Sass混合是的示例，同样在LESS样式中定义一个名叫“error”的Mixin，这个“error”设置了一个参数“@borderWidth”，在没有特别定义外，这个参数的默认值是“2px”：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">/*声明一个Mixin叫作“error”*/</div><div class="line">.error(@borderWidth:2px)&#123;</div><div class="line">  border:@borderWidth solid #f00;</div><div class="line">  color: #f00;</div><div class="line">&#125;</div><div class="line">/*调用error Mixins*/</div><div class="line">.generic-error &#123;</div><div class="line">  .error();/*直接调用error mixins*/</div><div class="line">&#125;</div><div class="line">.login-error &#123;</div><div class="line">  .error(5px);/*调用error mixins，并将参数@borderWidth的值重定义为5px*/</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="嵌套"><a href="#嵌套" class="headerlink" title="嵌套"></a>嵌套</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">section &#123;</div><div class="line">  margin:10px;</div><div class="line">&#125;</div><div class="line">section nav &#123;</div><div class="line">  height:25px;</div><div class="line">&#125;</div><div class="line">section nav a &#123;</div><div class="line">  color: #0982c1;</div><div class="line">&#125;</div><div class="line">section nav a:hover &#123;</div><div class="line">  text-decoration: underline;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">section &#123;</div><div class="line">  margin:10px;</div><div class="line">  nav &#123;</div><div class="line">    height:25px;</div><div class="line">    a &#123;</div><div class="line">      color:#0982c1;</div><div class="line">      &amp;:hover &#123;</div><div class="line">        text-decoration:underline;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><p>sass的继承：@extend<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">.block &#123;</div><div class="line">  margin: 10px 5px;</div><div class="line">  padding: 2px;</div><div class="line">&#125;</div><div class="line">p &#123;</div><div class="line">  @extend .block;/*继承.block选择器下所有样式*/</div><div class="line">  border: 1px solid #eee;</div><div class="line">&#125;</div><div class="line">ul,ol &#123;</div><div class="line">  @extend .block; /*继承.block选择器下所有样式*/</div><div class="line">  color: #333;</div><div class="line">  text-transform: uppercase;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">.block,p,ul,ol &#123;</div><div class="line">  margin: 10px 5px;</div><div class="line">  padding:2px;</div><div class="line">&#125;</div><div class="line">p &#123;</div><div class="line">  border: 1px solid #eee</div><div class="line">&#125;</div><div class="line">ul,ol &#123;</div><div class="line">  color:#333;</div><div class="line">  text-transform:uppercase;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>less的继承：类似于mixins<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">.block &#123;</div><div class="line">  margin: 10px 5px;</div><div class="line">  padding: 2px;</div><div class="line">&#125;</div><div class="line">p &#123;</div><div class="line">  .block;/*继承.block选择器下所有样式*/</div><div class="line">  border: 1px solid #eee;</div><div class="line">&#125;</div><div class="line">ul,ol &#123;</div><div class="line">  .block; /*继承.block选择器下所有样式*/</div><div class="line">  color: #333;</div><div class="line">  text-transform: uppercase;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">.block &#123;</div><div class="line">  margin: 10px 5px;</div><div class="line">  padding:2px;</div><div class="line">&#125;</div><div class="line">p &#123;</div><div class="line">  margin: 10px 5px;</div><div class="line">  padding:2px;</div><div class="line">  border: 1px solid #eee</div><div class="line">&#125;</div><div class="line">ul,ol &#123;</div><div class="line">  margin: 10px 5px;</div><div class="line">  padding:2px;</div><div class="line">  color:#333;</div><div class="line">  text-transform:uppercase;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/07/12/sass and less/" class="archive-article-date">
  	<time datetime="2016-07-12T13:22:01.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-07-12</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/">CSS</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-webpack" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/20/webpack/">webpack的学习之路</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="什么是webpack"><a href="#什么是webpack" class="headerlink" title="什么是webpack?"></a>什么是webpack?</h2><p>webpack是近期最火的一款模块加载器兼打包工具，它能把各种资源，例如JS（含JSX）、coffee、样式（含less/sass）、图片等都作为模块来使用和处理。</p>
<p><img src="http://img0.ph.126.net/NISsXVH8vHlHsaDx-jxWqw==/6631654904911171851.jpg" alt=""></p>
<p>我们可以直接使用 require(文件名) 的形式来引入各模块，即使它们可能需要经过编译（比如JSX和sass），但我们无须在上面花费太多心思，因为 webpack 有着各种健全的加载器（loader）在默默处理这些事情。</p>
<h2 id="webpack的安装和配置"><a href="#webpack的安装和配置" class="headerlink" title="webpack的安装和配置"></a>webpack的安装和配置</h2><h4 id="一、安装"><a href="#一、安装" class="headerlink" title="一、安装"></a>一、安装</h4><p>我们常规直接使用 npm 的形式来安装：</p>
<pre><code>$ npm install webpack -g
</code></pre><p>当然如果常规项目还是把依赖写入 package.json 包去更人性化：</p>
<pre><code>$ npm init
$ npm install webpack --save-dev
</code></pre><h4 id="二、配置"><a href="#二、配置" class="headerlink" title="二、配置"></a>二、配置</h4><p>在项目目录中添加配置文件 webpack.config.js，告诉 webpack 它需要做什么，具体例子如下：</p>
<pre><code>module.exports = {
    //项目的入口文件
    entry: &apos;./index.js&apos;,
    //打包后的文件放到哪个目录
    output: {
    path: &apos;/dist/&apos;,
    //此处不能使用相对路径
    publicPath:&apos;/test/&apos;,
    filename: &apos;bundle.js&apos; 
},
module:{
    //加载器配置
    loaders:[
    {
        //css-loader处理完，style-loader再进行处理
        test:/\.css$/,loader:&apos;style-loader!css-loader&apos;},
        //.js 文件使用 jsx-loader 来编译处理
        { test: /\.js$/, loader: &apos;jsx-loader?harmony&apos; },
        //.scss 文件使用 style-loader、css-loader 和 sass-loader 来编译处理
        { test: /\.scss$/, loader: &apos;style!css!sass?sourceMap&apos;},
        //图片文件使用 url-loader 来处理，小于8kb的直接转为base64
        { test: /\.(png|jpg)$/, loader: &apos;url-loader?limit=8192&apos;}
        ]
    }
}
</code></pre><p>如上，”-loader”其实是可以省略不写的，多个loader之间用“!”连接起来,但是所有的加载器都需要npm来加载。</p>
<h2 id="模块的引入"><a href="#模块的引入" class="headerlink" title="模块的引入"></a>模块的引入</h2><h4 id="一、HTML"><a href="#一、HTML" class="headerlink" title="一、HTML"></a>一、HTML</h4><p>直接在页面引入 webpack 最终生成的页面脚本即可，不用再写什么 data-main 或 seajs.use 了：</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head lang=&quot;en&quot;&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;title&gt;demo&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script src=&quot;dist/js/page/common.js&quot;&gt;&lt;/script&gt;
  &lt;script src=&quot;dist/js/page/index.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><h4 id="二、JS"><a href="#二、JS" class="headerlink" title="二、JS"></a>二、JS</h4><p>各脚本模块可以直接使用 commonJS 来书写，并可以直接引入未经编译的模块，比如 JSX、sass、coffee等（只要你在 webpack.config.js 里配置好了对应的加载器）。<br>我们再看看编译前的页面入口文件（index.js）：</p>
<pre><code>require(&apos;../../css/reset.scss&apos;); //加载初始化样式
require(&apos;../../css/allComponent.scss&apos;); //加载组件样式
var React = require(&apos;react&apos;);
var AppWrap = require(&apos;../component/AppWrap&apos;); //加载组件
var createRedux = require(&apos;redux&apos;).createRedux;
var Provider = require(&apos;redux/react&apos;).Provider;
var stores = require(&apos;AppStore&apos;);   
var redux = createRedux(stores);      
var App = React.createClass({
    render: function() {
        return (
            &lt;Provider redux={redux}&gt;
                {function() { return &lt;AppWrap /&gt;; }}
            &lt;/Provider&gt;
        );
    }
});
React.render(
    &lt;App /&gt;, document.body
);
</code></pre><h2 id="webpack的优势"><a href="#webpack的优势" class="headerlink" title="webpack的优势"></a>webpack的优势</h2><p>其优势主要可以归类为如下几个：</p>
<ol>
<li><p>webpack 是以 commonJS 的形式来书写脚本滴，但对 AMD/CMD 的支持也很全面，方便旧项目进行代码迁移。</p>
</li>
<li><p>能被模块化的不仅仅是 JS 了。</p>
</li>
<li><p>开发便捷，能替代部分 grunt/gulp 的工作，比如打包、压缩混淆、图片转base64等。</p>
</li>
<li><p>扩展性强，插件机制完善，特别是支持 React 热插拔（见 react-hot-loader ）的功能让人眼前一亮。</p>
</li>
</ol>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>在这里要推荐一个npm包,就是webpack-dev-server，安装这个包之后可以监视对象发生的变化，虽然不是像angular上面的双向数据绑定一样，改动就会发现差别，在这里需要保存之后才可以发现差别，具体配置如下：<br>首先可以在局部安装：</p>
<pre><code>$npm install webpack-dev-server --save-dev
</code></pre><p>其次就是在packagejson中的”script”设置：</p>
<pre><code>server&quot;:&quot;webpack-dev-server --hot --inline
</code></pre><p>接下来就是多参考官网了：</p>
<p>webpack的官网是 <a href="http://webpack.github.io/" target="_blank" rel="external">http://webpack.github.io/</a> </p>
<p>文档地址是 <a href="http://webpack.github.io/docs/" target="_blank" rel="external">http://webpack.github.io/docs/</a> </p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/04/20/webpack/" class="archive-article-date">
  	<time datetime="2016-04-20T04:31:38.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-04-20</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/">webpack</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-sea" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/01/sea/">使用SeaJS实现模块化JavaScript开发</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="什么是sea-js？"><a href="#什么是sea-js？" class="headerlink" title="什么是sea.js？"></a>什么是sea.js？</h2><p>SeaJS是一个遵循CommonJS规范的JavaScript模块加载框架，可以实现JavaScript的模块化开发及加载机制。与jQuery等JavaScript框架不同，SeaJS不会扩展封装语言特性，而只是实现JavaScript的模块化及按模块加载。SeaJS的主要目的是令JavaScript开发模块化并可以轻松愉悦进行加载，将前端工程师从繁重的JavaScript文件及对象依赖处理中解放出来，可以专注于代码本身的逻辑。SeaJS可以与jQuery这类框架完美集成。使用SeaJS可以提高JavaScript代码的可读性和清晰度，解决目前JavaScript编程中普遍存在的依赖关系混乱和代码纠缠等问题，方便代码的编写和维护。</p>
<h2 id="模块化开发规范"><a href="#模块化开发规范" class="headerlink" title="模块化开发规范"></a>模块化开发规范</h2><p>上述提到了CommenJS的规范就是模块化开发规范之一，当然还有诸如CMD、AMD等规范。</p>
<ul>
<li>CMD规范——sea.js（国产）——源于CommenJS</li>
<li>AMD规范——require.js（国外）</li>
<li>CommonJS规范——node.js </li>
</ul>
<h2 id="传统模式-vs-SeaJS模块化"><a href="#传统模式-vs-SeaJS模块化" class="headerlink" title="传统模式 vs SeaJS模块化"></a>传统模式 vs SeaJS模块化</h2><p>假设我们现在正在开发一个Web应用TinyApp，我们决定在TinyApp中使用jQuery框架。TinyApp的首页会用到module1.js，module1.js依赖module2.js和module3.js，同时module3.js依赖module4.js。</p>
<h4 id="传统模式"><a href="#传统模式" class="headerlink" title="传统模式"></a>传统模式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">var module1 = &#123;</div><div class="line">    run: function() &#123;</div><div class="line">        return $.merge([&apos;module1&apos;], $.merge(module2.run(), module3.run()));</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">//module2.js</div><div class="line">var module2 = &#123;</div><div class="line">    run: function() &#123;</div><div class="line">        return [&apos;module2&apos;];</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">//module3.js</div><div class="line">var module3 = &#123;</div><div class="line">    run: function() &#123;</div><div class="line">        return $.merge([&apos;module3&apos;], module4.run());</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line">//module4.js</div><div class="line">var module4 = &#123;</div><div class="line">    run: function() &#123;</div><div class="line">        return [&apos;module4&apos;];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>此时index.html需要引用module1.js及其所有下层依赖（注意顺序）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE HTML&gt;</div><div class="line">&lt;html lang=&quot;zh-CN&quot;&gt;</div><div class="line">&lt;head&gt;</div><div class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</div><div class="line">    &lt;title&gt;TinyApp&lt;/title&gt;</div><div class="line">    &lt;script src=&quot;./jquery-min.js&quot;&gt;&lt;/script&gt;</div><div class="line">    &lt;script src=&quot;./module4.js&quot;&gt;&lt;/script&gt;</div><div class="line">    &lt;script src=&quot;./module2.js&quot;&gt;&lt;/script&gt;</div><div class="line">    &lt;script src=&quot;./module3.js&quot;&gt;&lt;/script&gt;</div><div class="line">    &lt;script src=&quot;./module1.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">    &lt;p class=&quot;content&quot;&gt;&lt;/p&gt;</div><div class="line">    &lt;script&gt;</div><div class="line">        $(&apos;.content&apos;).html(module1.run());</div><div class="line">    &lt;/script&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<p>随着项目的进行，js文件会越来越多，依赖关系也会越来越复杂，使得js代码和html里的script列表往往变得难以维护。</p>
<h4 id="SeaJS模块化开发"><a href="#SeaJS模块化开发" class="headerlink" title="SeaJS模块化开发"></a>SeaJS模块化开发</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE HTML&gt;</div><div class="line">&lt;html lang=&quot;zh-CN&quot;&gt;</div><div class="line">&lt;head&gt;</div><div class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</div><div class="line">    &lt;title&gt;TinyApp&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">    &lt;p class=&quot;content&quot;&gt;&lt;/p&gt;</div><div class="line">    &lt;script src=&quot;./sea.js&quot;&gt;&lt;/script&gt;</div><div class="line">    &lt;script&gt;</div><div class="line">        seajs.use(&apos;./init&apos;, function(init) &#123;</div><div class="line">            init.initPage();</div><div class="line">        &#125;);</div><div class="line">    &lt;/script&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>可以看到html页面不再需要引入所有依赖的js文件，而只是引入一个sea.js，sea.js会处理所有依赖，加载相应的js文件，加载策略可以选择在渲染页面时一次性加载所有js文件，也可以按需加载（用到时才加载响应js）。还有就是<br>index.html加载了init模块，并使用此模块的initPage方法初始化页面数据。具体实现看下文介绍。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line">define(function(require, exports, module) = &#123;</div><div class="line"> </div><div class="line">    //原jquery.js代码...</div><div class="line"> </div><div class="line">    module.exports = $.noConflict(true);</div><div class="line">&#125;);</div><div class="line"> </div><div class="line">//init.js</div><div class="line">define(function(require, exports, module) = &#123;</div><div class="line">    var $ = require(&apos;jquery&apos;);</div><div class="line">    var m1 = require(&apos;module1&apos;);</div><div class="line"> </div><div class="line">    exports.initPage = function() &#123;</div><div class="line">        $(&apos;.content&apos;).html(m1.run());    </div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"> </div><div class="line">//module1.js</div><div class="line">define(function(require, exports, module) = &#123;</div><div class="line">    var $ = require(&apos;jquery&apos;);</div><div class="line">    var m2 = require(&apos;module2&apos;);</div><div class="line">    var m3 = require(&apos;module3&apos;);</div><div class="line"> </div><div class="line">    exports.run = function() &#123;</div><div class="line">        return $.merge([&apos;module1&apos;], $.merge(m2.run(), m3.run()));    </div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"> </div><div class="line">//module2.js</div><div class="line">define(function(require, exports, module) = &#123;</div><div class="line">    exports.run = function() &#123;</div><div class="line">        return [&apos;module2&apos;];</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"> </div><div class="line">//module3.js</div><div class="line">define(function(require, exports, module) = &#123;</div><div class="line">    var $ = require(&apos;jquery&apos;);</div><div class="line">    var m4 = require(&apos;module4&apos;);</div><div class="line"> </div><div class="line">    exports.run = function() &#123;</div><div class="line">        return $.merge([&apos;module3&apos;], m4.run());    </div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"> </div><div class="line">//module4.js</div><div class="line">define(function(require, exports, module) = &#123;</div><div class="line">    exports.run = function() &#123;</div><div class="line">        return [&apos;module4&apos;];</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>通过上面的js文件，我们发现js代码以模块进行组织，各个模块通过require引入自己依赖的模块，这样代码清晰明了。</p>
<h2 id="下载及安装"><a href="#下载及安装" class="headerlink" title="下载及安装"></a>下载及安装</h2><p>要在项目中使用SeaJS，你所有需要做的准备工作就是下载sea.js然后放到你项目的某个位置。</p>
<p>SeaJS项目目前托管在GitHub上，主页为 <a href="https://github.com/seajs/seajs/" target="_blank" rel="external">https://github.com/seajs/seajs/</a> 。可以到其git库的build目录下下载sea.js（已压缩）或sea-debug.js（未压缩）。</p>
<p>下载完成后放到项目的相应位置，然后在页面中引入，你就可以使用SeaJS了。</p>
<h2 id="SeaJS基本开发原则"><a href="#SeaJS基本开发原则" class="headerlink" title="SeaJS基本开发原则"></a>SeaJS基本开发原则</h2><p>在讨论SeaJS的具体使用前，先介绍一下SeaJS的模块化理念和开发原则。</p>
<p>使用SeaJS开发JavaScript的基本原则就是：一切皆为模块。引入SeaJS后，编写JavaScript代码就变成了编写一个又一个模块，SeaJS中模块的概念有点类似于面向对象中的类——模块可以拥有数据和方法，数据和方法可以定义为公共或私有，公共数据和方法可以供别的模块调用。</p>
<p>另外，每个模块应该都定义在一个单独js文件中，即一个对应一个模块。</p>
<h2 id="模块的定义及编写"><a href="#模块的定义及编写" class="headerlink" title="模块的定义及编写"></a>模块的定义及编写</h2><h4 id="模块定义函数define"><a href="#模块定义函数define" class="headerlink" title="模块定义函数define"></a>模块定义函数define</h4><p>SeaJS中使用“define”函数定义一个模块。下面是SeaJS的官方示例：</p>
<pre><code>define(function(require, exports, module) {
//code of the module...
});
</code></pre><p>上述的函数给了三个参数,意思分别如下：</p>
<ul>
<li>require——模块加载函数，用于记载依赖模块。</li>
<li>exports——接口点，将数据或方法定义在其上则将其暴露给外部调用。</li>
<li>module——模块的元数据。</li>
</ul>
<p>这三个参数可以根据需要选择是否需要显示指定。</p>
<p>下面说一下module。module是一个对象，存储了模块的元信息，具体如下：</p>
<ul>
<li>module.id——模块的ID。</li>
<li>module.dependencies——一个数组，存储了此模块依赖的所有模块的ID列表。</li>
<li>module.exports——与exports指向同一个对象。</li>
</ul>
<h4 id="三种编写模块的模式"><a href="#三种编写模块的模式" class="headerlink" title="三种编写模块的模式"></a>三种编写模块的模式</h4><p>第一种定义模块的模式是基于exports的模式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">define(function(require, exports, module) &#123;</div><div class="line">    var a = require(&apos;a&apos;); //引入a模块</div><div class="line">    var b = require(&apos;b&apos;); //引入b模块</div><div class="line"> </div><div class="line">    var data1 = 1; //私有数据</div><div class="line"> </div><div class="line">    var func1 = function() &#123; //私有方法</div><div class="line">        return a.run(data1);</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    exports.data2 = 2; //公共数据</div><div class="line"> </div><div class="line">    exports.func2 = function() &#123; //公共方法</div><div class="line">        return &apos;hello&apos;;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>上面是一种比较“正宗”的模块定义模式。除了将公共数据和方法附加在exports上，也可以直接返回一个对象表示模块，如下面的代码与上面的代码功能相同：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">define(function(require) &#123;</div><div class="line">    var a = require(&apos;a&apos;); //引入a模块</div><div class="line">    var b = require(&apos;b&apos;); //引入b模块</div><div class="line"> </div><div class="line">    var data1 = 1; //私有数据</div><div class="line"> </div><div class="line">    var func1 = function() &#123; //私有方法</div><div class="line">        return a.run(data1);</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    return &#123;</div><div class="line">        data2: 2,</div><div class="line">        func2: function() &#123;</div><div class="line">            return &apos;hello&apos;;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>如果模块定义没有其它代码，只返回一个对象，还可以有如下简化写法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">define(&#123;</div><div class="line">    data: 1,</div><div class="line">    func: function() &#123;</div><div class="line">        return &apos;hello&apos;;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>第三种方法对于定义纯JSON数据的模块非常合适。</p>
<h2 id="模块的载入和引用"><a href="#模块的载入和引用" class="headerlink" title="模块的载入和引用"></a>模块的载入和引用</h2><p>绝对路径：</p>
<pre><code>require(&quot;http://example/js/a&quot;);
</code></pre><p>相对路径：</p>
<pre><code>require(&quot;./c&quot;);
</code></pre><p>根据应用场景的不同，SeaJS提供了三个载入模块的API，分别是seajs.use，require和require.async，下面分别介绍。</p>
<h4 id="seajs-use"><a href="#seajs-use" class="headerlink" title="seajs.use"></a>seajs.use</h4><p>seajs.use主要用于载入入口模块。入口模块相当于C程序的main函数，同时也是整个模块依赖树的根。上面在TinyApp小例子中，init就是入口模块。seajs.use用法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">//单一模式</div><div class="line">seajs.use(&apos;./a&apos;);</div><div class="line"> </div><div class="line">//回调模式</div><div class="line">seajs.use(&apos;./a&apos;, function(a) &#123;</div><div class="line">  a.run();</div><div class="line">&#125;);</div><div class="line"> </div><div class="line">//多模块模式</div><div class="line">seajs.use([&apos;./a&apos;, &apos;./b&apos;], function(a, b) &#123;</div><div class="line">  a.run();</div><div class="line">  b.run();</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>一般seajs.use只用在页面载入入口模块，SeaJS会顺着入口模块解析所有依赖模块并将它们加载。如果入口模块只有一个，也可以通过给引入sea.js的script标签加入”data-main”属性来省略seajs.use，例如，上面TinyApp的index.html也可以改为如下写法会更简洁：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE HTML&gt;</div><div class="line">&lt;html lang=&quot;zh-CN&quot;&gt;</div><div class="line">&lt;head&gt;</div><div class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</div><div class="line">    &lt;title&gt;TinyApp&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">    &lt;p class=&quot;content&quot;&gt;&lt;/p&gt;</div><div class="line">    &lt;script src=&quot;./sea.js&quot; data-main=&quot;./init&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<h4 id="require"><a href="#require" class="headerlink" title="require"></a>require</h4><p>require是SeaJS主要的模块加载方法，当在一个模块中需要用到其它模块时一般用require加载：</p>
<pre><code>var m = require(&apos;/path/to/module/file&apos;);
</code></pre><p>这里简要介绍一下SeaJS的自动加载机制。上文说过，使用SeaJS后html只要包含sea.js即可，那么其它js文件是如何加载进来的呢？SeaJS会首先下载入口模块，然后顺着入口模块使用正则表达式匹配代码中所有的require，再根据require中的文件路径标识下载相应的js文件，对下载来的js文件再迭代进行类似操作。整个过程类似图的遍历操作（因为可能存在交叉循环依赖所以整个依赖数据结构是一个图而不是树）。</p>
<p>明白了上面这一点，下面的规则就很好理解了：</p>
<p>传给require的路径标识必须是字符串字面量，不能是表达式，如下面使用require的方法是错误的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">require(&apos;module&apos; + &apos;1&apos;);</div><div class="line"> </div><div class="line">require(&apos;Module&apos;.toLowerCase());</div></pre></td></tr></table></figure></p>
<h4 id="require-async"><a href="#require-async" class="headerlink" title="require.async"></a>require.async</h4><p>上文说过SeaJS会在html页面打开时通过静态分析一次性记载所有需要的js文件，如果想要某个js文件在用到时才下载，可以使用require.async：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">require.async(&apos;/path/to/module/file&apos;, function(m) &#123;</div><div class="line">    //code of callback...</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>这样只有在用到这个模块时，对应的js文件才会被下载，也就实现了JavaScript代码的按需加载。</p>
<h2 id="SeaJS的全局配置"><a href="#SeaJS的全局配置" class="headerlink" title="SeaJS的全局配置"></a>SeaJS的全局配置</h2><p>SeaJS提供了一个seajs.config方法可以设置全局配置，接收一个表示全局配置的配置对象。具体使用方法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">seajs.config(&#123;</div><div class="line">    base: &apos;path/to/jslib/&apos;,</div><div class="line">    alias: &#123;</div><div class="line">      &apos;app&apos;: &apos;path/to/app/&apos;</div><div class="line">    &#125;,</div><div class="line">    charset: &apos;utf-8&apos;,</div><div class="line">    timeout: 20000,</div><div class="line">    debug: false</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>这里base表示的路径是基址路径。假如基址路径的地址是 example.com/js/3-party/ ，在执行下面的代码的时候：</p>
<pre><code>var $ = require(&apos;jquery&apos;);
</code></pre><p>会载入  example.com/js/3-party/jquery.js 。</p>
<p>alias可以对较长的常用路径设置缩写。</p>
<p>charset表示下载js时script标签的charset属性。</p>
<p>timeout表示下载文件的最大时长，以毫秒为单位。</p>
<p>debug表示是否工作在调试模式下。</p>
<h2 id="一个完整的例子"><a href="#一个完整的例子" class="headerlink" title="一个完整的例子"></a>一个完整的例子</h2><p>上文说了那么多，知识点比较分散，所以最后我打算用一个完整的SeaJS例子把这些知识点串起来，方便朋友们归纳回顾。这个例子包含如下文件：</p>
<ul>
<li>index.html——主页面。</li>
<li>sea.js——SeaJS脚本。</li>
<li>init.js——init模块，入口模块，依赖data、jquery、style三个模块。由主页面载入。</li>
<li>data.js——data模块，纯json数据模块，由init载入。</li>
<li>jquery.js——jquery模块，对 jQuery库的模块化封装，由init载入。</li>
<li>style.css——CSS样式表，作为style模块由init载入。</li>
<li>ea.js和jquery.js的代码属于库代码，就不赘述，这里只给出自己编写的文件的代码。</li>
</ul>
<p>html：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE HTML&gt;</div><div class="line">&lt;html lang=&quot;zh-CN&quot;&gt;</div><div class="line">&lt;head&gt;</div><div class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</div><div class="line">    &lt;title&gt;&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;div id=&quot;content&quot;&gt;</div><div class="line">    &lt;p class=&quot;author&quot;&gt;&lt;/p&gt;</div><div class="line">    &lt;p class=&quot;blog&quot;&gt;&lt;a href=&quot;#&quot;&gt;Blog&lt;/a&gt;&lt;/p&gt;</div><div class="line">&lt;/div&gt;</div><div class="line"> </div><div class="line">&lt;script src=&quot;./sea.js&quot; data-main=&quot;./init&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<p>css：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">.author&#123;color:red;font-size:10pt;&#125;</div><div class="line">.blog&#123;font-size:10pt;&#125;</div></pre></td></tr></table></figure></p>
<p>javascript：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">//init.js</div><div class="line">define(function(require, exports, module) &#123;</div><div class="line">    var $ = require(&apos;./jquery&apos;);</div><div class="line">    var data = require(&apos;./data&apos;);</div><div class="line">    var css = require(&apos;./style.css&apos;);</div><div class="line"> </div><div class="line">    $(&apos;.author&apos;).html(data.author);</div><div class="line">    $(&apos;.blog&apos;).attr(&apos;href&apos;, data.blog);</div><div class="line">&#125;);</div><div class="line"> </div><div class="line">//data.js</div><div class="line">define(&#123;</div><div class="line">    author: &apos;Ktig&apos;,</div><div class="line">    blog: &apos;http://Ktig.github.io&apos;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>效果如下：<br><img src="http://img1.ph.126.net/ReBlcZoT9JbqQcdVfpirIQ==/6632174973908016457.jpg" alt=""></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/03/01/sea/" class="archive-article-date">
  	<time datetime="2016-03-01T04:33:20.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-03-01</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sea-js/">sea.js</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-git" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/25/git/">开始Git学习</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="关于Git的安装"><a href="#关于Git的安装" class="headerlink" title="关于Git的安装"></a>关于Git的安装</h2><p>Git的安装需要先下载对应的的安装包，然后一定要记得配置环境变量。比如我的环境变量就配置为<br><img src="http://img1.ph.126.net/XcpxY74dZxcWRbbmT0bX5g==/6631478983050728278.jpg" alt=""></p>
<p>然后记得在PATH里面也配置好，如下</p>
<p><img src="http://img0.ph.126.net/riJUMae3Y5yAFpOZL5Fl5w==/6631646108818136076.jpg" alt=""></p>
<h2 id="关于Git常用的指令"><a href="#关于Git常用的指令" class="headerlink" title="关于Git常用的指令"></a>关于Git常用的指令</h2><h4 id="Git版本库的创建"><a href="#Git版本库的创建" class="headerlink" title="Git版本库的创建"></a>Git版本库的创建</h4><pre><code>$git init;
</code></pre><p>通过这个命令把这个目录变为git可管理的仓库，执行之后，可以发现多一个.git的文件夹</p>
<pre><code>$git add .;
</code></pre><p>将所有文件这里只是添加到暂存区</p>
<pre><code>$git commit -m &quot;commit&quot;;
</code></pre><p>这里是将暂存区的所有内容提交到master所在的分支，并且有附带介绍的信息</p>
<pre><code>$git status; 
</code></pre><p>掌握仓库当前的状态</p>
<pre><code>$git diff;
</code></pre><p>展示修改的具体内容</p>
<pre><code>$git log ; 
</code></pre><p>记录文件的每一次改动的详细信息</p>
<pre><code>$git log --oneline;
</code></pre><p>将每一次改动的详细信息以行的形式展示</p>
<pre><code>$git  reset --hard HEAD^;
</code></pre><p>查看上一次的修改</p>
<pre><code>$git  reset --hard HEAD~2;
</code></pre><p>查看上上一次的修改</p>
<h4 id="撤销版本修改"><a href="#撤销版本修改" class="headerlink" title="撤销版本修改"></a>撤销版本修改</h4><p>1.在工作区进行修改，没有添加到暂存区</p>
<pre><code>$ git checkout -- readme.txt
</code></pre><p>2.在工作区进行修改，并且执行了添加到暂存区的操作，但是没有提交到版本库</p>
<pre><code>$ git reset HEAD readme.txt ；//在此处回到情况1
$ git checkout -- readme.txt
</code></pre><p>3.修改后提交到了版本库</p>
<pre><code>$ git reset --hard HEAD^
</code></pre><h4 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h4><p>首先，我们创建dev分支，然后切换到dev分支：</p>
<pre><code>$ git checkout -b dev
Switched to a new branch &apos;dev&apos;
</code></pre><p>然后，用git branch命令查看当前分支（所有分支）：</p>
<pre><code>$ git branch
* dev
  master
</code></pre><p>之后可以在这个分支上面修改文件，然后添加到版本库：</p>
<pre><code>$ git add readme.txt
$ git commit -m &apos;add text about....&apos;
</code></pre><p>dev分支的工作完成，我们就可以切换回master分支：</p>
<pre><code>$ git checkout master
Switched to branch &apos;master&apos;
</code></pre><p>现在，我们把dev分支的工作成果合并到master分支上：</p>
<pre><code>$ git merge dev
</code></pre><p>合并完成后，就可以放心地删除dev分支了：</p>
<pre><code>$ git branch -d dev
</code></pre><p>删除后，查看branch，就只剩下master分支了：</p>
<pre><code>$ git branch
* master
</code></pre><p>以下是关于分支所经常使用的操作指令：</p>
<pre><code>1.查看分支：git branch
2.创建分支：git branch &lt;name&gt;
3.切换分支：git checkout &lt;name&gt;
4.创建+切换分支：git checkout -b &lt;name&gt;
5.合并某分支到当前分支：git merge &lt;name&gt;
6.删除分支：git branch -d &lt;name&gt;
</code></pre>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2015/11/25/git/" class="archive-article-date">
  	<time datetime="2015-11-25T04:10:33.000Z" itemprop="datePublished"><i class="icon-clock"></i>2015-11-25</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/">Git</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-bubble and capture" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/09/bubble and capture/">JS事件中的冒泡和捕获</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>事件冒泡和事件捕获分别由微软和网景公司提出，这两个概念都是为了解决页面中事件流（事件发生顺序）的问题。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div id=&quot;outer&quot;&gt;</div><div class="line">  &lt;p id=&quot;inner&quot;&gt;Click me!&lt;/p&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>上面的代码当中一个div元素当中有一个p子元素，如果两个元素都有一个click的处理函数，那么我们怎么才能知道哪一个函数会首先被触发呢？</p>
<p>为了解决这个问题微软和网景提出了两种几乎完全相反的概念。</p>
<h2 id="冒泡事件"><a href="#冒泡事件" class="headerlink" title="冒泡事件"></a>冒泡事件</h2><p>微软提出了名为事件冒泡(event bubbling)的事件流。事件冒泡可以形象地比喻为把一颗石头投入水中，泡泡会一直从水底冒出水面。也就是说，事件会从最内层的元素开始发生，一直向上传播，直到document对象。</p>
<p>因此上面的例子在事件冒泡的概念下发生click事件的顺序应该是p -&gt; div -&gt; body -&gt; html -&gt; document</p>
<h2 id="捕获事件"><a href="#捕获事件" class="headerlink" title="捕获事件"></a>捕获事件</h2><p>网景提出另一种事件流名为事件捕获(event capturing)。与事件冒泡相反，事件会从最外层开始发生，直到最具体的元素。</p>
<p>因此上面的例子在事件捕获的概念下发生click事件的顺序应该是document-&gt; html -&gt; body -&gt; div -&gt; p</p>
<h2 id="addEventListener的第三个参数"><a href="#addEventListener的第三个参数" class="headerlink" title="addEventListener的第三个参数"></a>addEventListener的第三个参数</h2><p>“DOM2级事件”中规定的事件流同时支持了事件捕获阶段和事件冒泡阶段，而作为开发者，我们可以选择事件处理函数在哪一个阶段被调用。</p>
<p>addEventListener方法用来为一个特定的元素绑定一个事件处理函数，是JavaScript中的常用方法。addEventListener有三个参数：</p>
<pre><code>element.addEventListener(event, function, useCapture)
</code></pre><p>第一个参数是需要绑定的事件，第二个参数是触发事件后要执行的函数。而第三个参数默认值是false，表示在事件冒泡的阶段调用事件处理函数，如果参数为true，则表示在事件捕获阶段调用处理函数。</p>
<h2 id="事件代理"><a href="#事件代理" class="headerlink" title="事件代理"></a>事件代理</h2><p>在实际的开发当中，利用事件流的特性，我们可以使用一种叫做事件代理的方法。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;ul id=&quot;color-list&quot;&gt;</div><div class="line">  &lt;li&gt;red&lt;/li&gt;</div><div class="line">  &lt;li&gt;yellow&lt;/li&gt;</div><div class="line">  &lt;li&gt;blue&lt;/li&gt;</div><div class="line">  &lt;li&gt;green&lt;/li&gt;</div><div class="line">  &lt;li&gt;black&lt;/li&gt;</div><div class="line">  &lt;li&gt;white&lt;/li&gt;</div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure></p>
<p>如果点击页面中的li元素，然后输出li当中的颜色，我们通常会这样写:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">(function()&#123;</div><div class="line">    var color_list = document.getElementById(&apos;color-list&apos;);</div><div class="line">    var colors = color_list.getElementsByTagName(&apos;li&apos;);</div><div class="line">    for(var i=0;i&lt;colors.length;i++)&#123;                          </div><div class="line">　　　　 colors[i].addEventListener(&apos;click&apos;,showColor,false);</div><div class="line">    &#125;;</div><div class="line">    function showColor(e)&#123;</div><div class="line">        var x = e.target;</div><div class="line">        alert(&quot;The color is &quot; + x.innerHTML);</div><div class="line">    &#125;;</div><div class="line">&#125;)();</div></pre></td></tr></table></figure></p>
<p>但是利用事件流的特性，我们可以这么写：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">(function()&#123;</div><div class="line">    var color_list = document.getElementById(&apos;color-list&apos;);</div><div class="line">    color_list.addEventListener(&apos;click&apos;,showColor,false);</div><div class="line">    function showColor(e)&#123;</div><div class="line">        var x = e.target;</div><div class="line">        if(x.nodeName.toLowerCase() === &apos;li&apos;)&#123;</div><div class="line">            alert(&apos;The color is &apos; + x.innerHTML);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;)();</div></pre></td></tr></table></figure></p>
<p>使用事件代理的好处不仅在于将多个事件处理函数减为一个，而且对于不同的元素可以有不同的处理方法。假如上述列表元素当中添加了其他的元素（如：a、span等），我们不必再一次循环给每一个元素绑定事件，直接修改事件代理的事件处理函数即可。</p>
<h2 id="IE浏览器的问题"><a href="#IE浏览器的问题" class="headerlink" title="IE浏览器的问题"></a>IE浏览器的问题</h2><p>主流浏览器对addEventListener兼容性还好，而IE浏览器对addEventListener兼容性并不算太好，只有IE9以上可以使用。因此要兼容低版本的IE浏览器，我们可以使用IE中的<strong>attachEvent</strong>。</p>
<pre><code>object.attachEvent(event, function)
</code></pre><p>两个参数与addEventListener相似，分别是事件和处理函数，默认是事件冒泡阶段调用处理函数，要注意的是，写事件名时候要加上”on”前缀（”onload”、”onclick”等）。</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2015/11/09/bubble and capture/" class="archive-article-date">
  	<time datetime="2015-11-09T03:55:03.000Z" itemprop="datePublished"><i class="icon-clock"></i>2015-11-09</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DOM/">DOM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  


      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Ktig
    	</div>
      	<div class="footer-right">	
              <span>本站的主题：<span style='color:green'>Yilia</span></span>
          </span>
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true
	}
</script>

<script src="/./main.js"></script>



    
<div class="tools-col">
  <ul class="btn-wrap">
    
      <li class="chose" data-hook="tools-section-all"><span class="text">全部</span><i class="icon-book"></i></li>
    
    
      <li data-hook="tools-section-tag"><span class="text">标签</span><i class="icon-price-tags"></i></li>
    
    
      <li data-hook="tools-section-friends"><span class="text">友链</span><i class="icon-link"></i></li>
    
    
      <li data-hook="tools-section-me"><span class="text">我</span><i class="icon-smile"></i></li>
    
  </ul>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all chose">
    	</section>
    

    
    	<section class="tools-section tools-section-tag">
    			<div class="widget tagcloud" id="js-tagcloud">
    				<a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/DOM/" style="font-size: 10px;">DOM</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/MarkDown/" style="font-size: 10px;">MarkDown</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/sea-js/" style="font-size: 10px;">sea.js</a> <a href="/tags/webpack/" style="font-size: 10px;">webpack</a> <a href="/tags/前端引擎/" style="font-size: 10px;">前端引擎</a>
    			</div>
    	</section>
    

    
    	<section class="tools-section tools-section-friends">
  		
  			<div class="friends-wrap" id="js-friends">
  			
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接1</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接2</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接3</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接4</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接5</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接6</a>
  	        
  	        </div>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">未曾一次退败&lt;br&gt;&lt;br&gt;未尝得一知己</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>